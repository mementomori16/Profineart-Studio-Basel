@use '../../global.scss' as global;

.similarProducts {
  margin-top: global.$space-xl;
  padding: global.$space-lg 0; // Removed side padding to allow scrollbar to hit edges
  max-width: global.$breakpoint-xxl;
  margin-left: auto;
  margin-right: auto;
  background-color: transparent; 
  border-top: 1px solid rgba(255, 255, 255, 0.1);

  h2 {
    font-size: global.$font-size-h3;
    color: #ffffff !important;
    text-align: center;
    margin-bottom: global.$space-md;
    font-weight: global.$font-weight-light;
    text-transform: uppercase;
    letter-spacing: 0.15rem;
  }

  .scrollableGallery {
    display: flex;
    gap: global.$space-sm; // Reduced gap
    overflow-x: auto; 
    overflow-y: hidden;
    padding: 0 global.$space-lg global.$space-md global.$space-lg; // Side padding inside scroll for better start/end
    -webkit-overflow-scrolling: touch; // Forces momentum scrolling on iOS
    scroll-snap-type: x proximity; // Improves mobile feel
    touch-action: pan-x; // Explicitly allow horizontal touch

    &::-webkit-scrollbar {
      height: 4px; 
    }

    &::-webkit-scrollbar-thumb {
      background-color: rgba(255, 255, 255, 0.25);
      border-radius: 10px;
    }

    &::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
      margin: 0 global.$space-lg;
    }

    .similarProductItem {
      position: relative; 
      flex: 0 0 auto; 
      width: 13rem; // Slightly narrower
      display: flex;
      flex-direction: column;
      background-color: rgba(255, 255, 255, 0.05); 
      border-radius: global.$border-radius-md; 
      padding: global.$space-xs; // Tightened padding
      border: 1px solid rgba(255, 255, 255, 0.08);
      scroll-snap-align: start;

      // Removes extra space at the bottom
      justify-content: flex-start; 

      .badge {
        position: absolute;
        top: 0.4rem;
        left: 0.4rem;
        background-color: global.$color-cta-primary-warm;
        color: white;
        padding: 1px 6px;
        font-size: 0.6rem; // Smaller base size
        font-weight: global.$font-weight-bold;
        border-radius: 2px;
        z-index: 4;
        text-transform: uppercase;
      }

      .imageWrapper {
        width: 100%;
        aspect-ratio: 16 / 10; // Fixed ratio to prevent height expansion
        overflow: hidden;
        border-radius: global.$border-radius-sm;
      }

      .image {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .title {
        margin: global.$space-xs 0 0 0; // Minimal margins
        font-size: 0.85rem;
        font-weight: global.$font-weight-semibold;
        color: rgba(255, 255, 255, 0.9);
        text-align: center;
        line-height: 1.2;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        min-height: auto; // Removed forced min-height to save space
      }
    }
  }

  @media (max-width: global.$breakpoint-sm) {
    margin-top: global.$space-md;
    padding-bottom: global.$space-sm;

    .scrollableGallery {
      padding: 0 global.$space-md global.$space-sm global.$space-md;
      gap: global.$space-xs;

      .similarProductItem {
        width: 9rem; // More compact for mobile
        padding: 4px; // Extremely tight padding
        
        .badge {
          font-size: 0.5rem; // Scale down massive badges
          padding: 1px 4px;
          top: 0.25rem;
          left: 0.25rem;
        }

        .title {
          font-size: 0.75rem;
        }
      }
    }
  }
}
