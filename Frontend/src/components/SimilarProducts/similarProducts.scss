@use '../../global.scss' as global;

.similarProducts {
  margin-top: global.$space-xl;
  padding: global.$space-lg;
  max-width: global.$breakpoint-xxl;
  margin-left: auto;
  margin-right: auto;
  background-color: global.$color-card;
  border-radius: global.$border-radius-lg;
  box-shadow: global.$shadow-lg;

  h2 {
    font-size: global.$font-size-h3;
    color: global.$color-text-dark2 !important; 
    text-align: center;
    margin-bottom: global.$space-md;
    font-weight: global.$font-weight-bold;
  }

  .scrollableGallery {
    display: flex;
    gap: global.$space-md; 
    overflow-x: auto; 
    padding: global.$space-sm global.$space-sm global.$space-lg global.$space-sm; // Extra bottom padding for scrollbar visibility
    -webkit-overflow-scrolling: touch;

    // --- RESTORED SHARP SCROLLBAR ---
    &::-webkit-scrollbar {
      height: 0.5rem; // Slightly thicker for better visibility
    }

    &::-webkit-scrollbar-thumb {
      background-color: global.$color-border-subtle-2; // Sharp defined color
      border-radius: global.$border-radius-sm;
      border: 1px solid rgba(0, 0, 0, 0.05); // Adds definition
      
      &:hover {
        background-color: global.$color-text-light; // Darkens on hover
      }
    }

    &::-webkit-scrollbar-track {
      background: global.$color-alt-background-2; // Contrast background
      border-radius: global.$border-radius-sm;
      margin: 0 global.$space-sm;
    }

    .similarProductItem {
      position: relative; 
      flex: 0 0 auto; 
      width: 14rem; 
      display: flex;
      flex-direction: column;
      background-color: rgba(255, 255, 255, 0.4); 
      border-radius: global.$border-radius-lg; 
      padding: global.$space-sm; 
      border: 0.0625rem solid rgba(0, 0, 0, 0.05);
      box-shadow: global.$shadow-sm;
      transition: transform 0.2s ease;

      &:hover {
        transform: translateY(-3px);
      }

      // --- Badge Logic from Courses implementation ---
      .badge {
        position: absolute;
        top: global.$space-xs;
        left: global.$space-xs;
        background-color: rgba(129, 28, 28, 0.85); // Dark red from Courses section
        color: global.$color-text-white;
        padding: global.$space-xxxs global.$space-xs;
        font-size: 0.65rem;
        font-weight: global.$font-weight-semibold;
        border-radius: global.$border-radius-sm;
        z-index: 4;
        text-transform: uppercase;
        pointer-events: none;
      }

      .imageWrapper {
        width: 100%;
        overflow: hidden;
        border-radius: global.$border-radius-md;
        line-height: 0;
      }

      .image {
        width: 100%;
        height: 8rem; 
        object-fit: cover;
      }

      .title {
        margin-top: global.$space-sm; 
        margin-bottom: 0; 
        font-size: global.$font-size-sm;
        font-weight: global.$font-weight-bold;
        color: global.$color-text-dark2; 
        text-align: center;
        line-height: 1.3;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        min-height: 2.6em; // Ensures titles align even if 1 line
      }
    }
  }

  @media (max-width: global.$breakpoint-sm) {
    padding: global.$space-md;
    
    .scrollableGallery .similarProductItem {
      width: 10.5rem;
      .image { height: 6.5rem; }
    }
  }
}
